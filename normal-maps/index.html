<html><head><link rel="shortcut icon" type="image/png" href="https://cslmodding.info/favicon.png"/><link rel="stylesheet" href="https://cslmodding.info/css/styles.css">
<script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><link href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700" rel="stylesheet">
</head><body id="top"><div class="menu" id="menu-file"></div><div class="toc"><h1><a href="#top">

Normal Maps

</a></h1>



</div><div class="page">
<div class="imgbg"><div class="imggr"></div><img src='https://i.imgur.com/eQNvoe1.jpg'/></div><div class="content">













<h2 id="about">About</h2>

<p>This article describes how to create correct normal maps in different situations, and potential problems while generating or importing them ingame.</p>


<h2 id="generation">Generation</h2>


<div class="content-photo-box"><img src="https://i.imgur.com/RLIMzQX.png"><p>
A regular normal map without any inverted channels and its red and green channels shown separately.
</p></div>

<p>Before you decide if you need to invert one of the normal map channels, you need to make sure the normal map generator you are using isn't inverting it by default. Some normal map generators have settings for inverting the red(x) and green(y) channels, but some of them invert the red channel by default.</p>

<p>A regular normal map with no inversions looks as if it's lit from the top right - that means the red channel looks like the light is coming from the right, but the green channel looks like the light from the top. That means it appears to be lit from the positive x and y directions which is <a href="https://en.wikipedia.org/wiki/Normal_mapping#How_it_works">the normal map standard</a>.</p>



<h2 id="mesh-import-rotation">Mesh Import Rotation</h2>

<p>The rotation feature in the asset editor mesh importer is broken - it produces incorrect tangents, which will make normal maps appear incorrectly or not at all depending on the orientation and uv mapping of each face.</p>


<div class="content-info"><em>
If you would like to use the rotation feature without breaking the tangents and normal maps, use the <a href="https://steamcommunity.com/sharedfiles/filedetails/?id=1518485094">Mesh Import Rotation Tangents Fix mod</a>.
</em></div>

<h2 id="assets">Assets</h2>

<p>For regular assets such as buildings, props, vehicles, trees, and citizens, the normal map works correctly with no inverted channels, according to the standard described above.</p>


<h2 id="networks">Networks</h2>

<p>For faces which are vertex painted magenta the normal map always works just like for any normal asset, as described above.</p>

<p>But for faces which are not vertex painted magenta (that means they use the automatic tiling as networks usually do) the green channel usually needs to be inverted.</p>

<p>If you are creating a network using an asymmetric mesh, you would use the invert flag for the segment mesh to appear continuous and not flip every other segment, this will result in the normal map green channel being inverted for every other segment. The solution for that is to have 2 different segment meshes, one of which would have a flipped mesh or a flipped normal map, depending on the flags it has.</p>


<h2 id="map-themes">Map Themes</h2>

<div class="content-photo-box"><img src="https://i.imgur.com/MjT23We.png"><p>
A normal map with an inverted green channel and its appearance ingame.
</p></div>

<p>Map theme sand and cliff normal maps require an inverted green channel to appear correctly.</p>

<p>The water normal map is animated ingame and constantly fades between a regular and an inverted version.</p>
















</div></div>
<script>$(function(){$("#menu-file").load("https://cslmodding.info/menu.html");});</script>
<script src='https://cslmodding.info/js/article.js'></script>
<script src='https://cslmodding.info/js/headings.js'></script>
<script src='https://cslmodding.info/js/toc.js'></script>
<script src='https://cslmodding.info/js/title.js'></script>
<script src='https://cslmodding.info/js/scroll.js'></script>
<script>var relevant = "<br>"; $(".toc").append(relevant);</script>
</body></html>